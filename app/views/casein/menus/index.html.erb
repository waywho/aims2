<!-- Scaffolding generated by Casein v5.1.1.5 -->

<h2>Menus<%= casein_pagination_details @menus %></h2>

<div class='col-lg-9 col-md-9'>
<h4>Existing Menu Items</h4>
<p>
<ul>
<% @course_formats.each do |course_format| %>
	<li><%= course_format.title %>
<% end %>
	<li>Staff</li>
	<li>Booking</li>
</ul>
</p>
<br />

<h4>Additional Menu Items</h4><span class="instruction-text">(drag to change the menu order.)</span>
<%= form_tag edit_multiple_casein_menus_path, method: :post do %>
	<%= render :partial => 'casein/menus/table', :locals => { :menus => @menus } %>

		<br />
		<hr />
		<span class="instruction-text">(Select muliple records to make changes.)</span>
			<%= submit_tag "Quick Edit", :class => 'btn btn-mini btn-primary btn-index pull-right' %>
			<%= submit_tag "Delete", name: 'delete', :class => 'btn btn-mini btn-danger btn-index pull-right' %>
<% end %>
</div>


<div class='col-lg-3 col-md-3'>
<h4>Add a new menu</h4>

<%= form_for [@page, @menu], :url => casein_menus_path do |f| %>
	
	<%= render :partial => 'casein/menus/form', :locals => { :f => f } %>
	<br />
	<p class="submits">
		<%= f.submit "Add new menu", :class => "btn btn-mini btn-primary" %>
	</p>

<% end %>
</div>

<script>
	var fixHelper = function(e, ui) {
		ui.children().each(function() {
			$(this).width($(this).width());
		});
		return ui;
	};
	$(function() {
		$('.menu-list').sortable({
			helper: fixHelper,
			update: function(event, ui) {
				$.ajax({
					type: 'PUT',
					url: ui.item.data('update-url'),
					dataType: 'json',
					data: { menu: {row_order_position: ui.item.index()}}
				});
			}
		});
	});
</script>